## 线程和进程 ##
（一）进程

1.1 进程的概念

   是计算机中的程序关于某数据集合上的一次运行活动，是系统进行资源分配和调度的基本单位，是操作系统结构的基础。在早期面向进程设计的计算机结构中，进程是程序的基本执行实体；在当代面向线程设计的计算机结构中，进程是线程的容器。程序是指令、数据及其组织形式的描述，进程是程序的实体。

1.2 进程的优势

- 每个进程互相独立，不影响主程序的稳定性，子进程崩溃没关系；
- 通过增加CPU，就可以容易扩充性能；
- 可以尽量减少线程加锁/解锁的影响，极大提高性能；
- 每个子进程都有2GB地址空间和相关资源，总体能够达到的性能上限非常大；

1.3 进程的劣势

- 逻辑控制复杂，需要和主程序交互；
- 需要跨进程边界，如果有大数据量传送，就不太好，适合小数据量传送、密集运算 多进程调度开销比较大。

（二）线程

1.1线程的概念

 是程序执行流的最小单元。线程是程序中一个单一的顺序控制流程。进程内一个相对独立的、可调度的执行单元，是系统独立调度和分派CPU的基本单位指运行中的程序的调度单位。在单个程序中同时运行多个线程完成不同的工作，称为多线程。

1.2 线程的优势

- 无需跨进程边界；
- 程序逻辑和控制方式简单；
- 所有线程可以直接共享内存和变量等；
- 线程方式消耗的总资源比进程方式少。

1.3 线程的劣势

- 每个线程与主程序共用地址空间，受限于2GB地址空间；
- 线程之间的同步和加锁控制比较麻烦；
- 一个线程的崩溃可能影响到整个程序的稳定性；
- 到达一定的线程数程度后，即使再增加CPU也无法提高性能；
- 线程能够提高的总性能有限，而且线程多了之后，线程本身的调度也是一个麻烦事儿，需要消耗较多的CPU。

（三）区别和联系

- 资源分配&处理器调度：进程是资源分配的基本单位，线程是处理器调度的基本单位。

- 地址空间：进程拥有独立的地址空间；线程没有独立的地址空间，同一进程内多个线程共享其资源;
 
- 执行：每个线程都有一个程序运行的入口、顺序执行序列和程序的出口，但线程不能单独执行，必须组成进程，一个进程至少有一个主线程。简而言之，一个程序至少有一个进程，一个进程至少有一个线程。

- 一个线程只能属于一个进程，而一个进程可以有多个线程，但至少有一个线程。线程是操作系统可识别的最小执行和调度单位。

- 资源分配给进程，同一进程的所有线程共享该进程的所有资源。 同一进程中的多个线程共享代码段(代码和常量)，数据段(全局变量和静态变量)，扩展段(堆存储)。但是每个线程拥有自己的栈段，栈段又叫运行时段，用来存放所有局部变量和临时变量。

- 处理机分给线程，即真正在处理机上运行的是线程。

- 线程在执行过程中，需要协作同步。不同进程的线程间要利用消息通信的办法实现同步。

- 一个进程可以有多个线程，但至少有一个线程；而一个线程只能在一个进程的地址空间内活动。

- 资源分配给进程，同一个进程的所有线程共享该进程所有资源。

- CPU分配给线程，即真正在处理器运行的是线程。

参考文章：

https://blog.csdn.net/qq_25408423/article/details/81979072

 https://blog.csdn.net/u010183728/article/details/82428472

